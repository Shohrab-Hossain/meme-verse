(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9fa5f6b4"],{"0840":function(t,e,a){},"3af5":function(t,e,a){"use strict";a("673d")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var o=a("1d80"),r=a("5899"),s="["+r+"]",n=RegExp("^"+s+s+"*"),i=RegExp(s+s+"*$"),c=function(t){return function(e){var a=String(o(e));return 1&t&&(a=a.replace(n,"")),2&t&&(a=a.replace(i,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},"673d":function(t,e,a){},7156:function(t,e,a){var o=a("861d"),r=a("d2bb");t.exports=function(t,e,a){var s,n;return r&&"function"==typeof(s=e.constructor)&&s!==a&&o(n=s.prototype)&&n!==a.prototype&&r(t,n),t}},"945f":function(t,e,a){"use strict";a("0840")},a15b:function(t,e,a){"use strict";var o=a("23e7"),r=a("44ad"),s=a("fc6a"),n=a("a640"),i=[].join,c=r!=Object,u=n("join",",");o({target:"Array",proto:!0,forced:c||!u},{join:function(t){return i.call(s(this),void 0===t?",":t)}})},a9e3:function(t,e,a){"use strict";var o=a("83ab"),r=a("da84"),s=a("94ca"),n=a("6eeb"),i=a("5135"),c=a("c6b6"),u=a("7156"),f=a("c04e"),d=a("d039"),l=a("7c73"),p=a("241c").f,g=a("06cf").f,h=a("9bf2").f,m=a("58a8").trim,v="Number",x=r[v],b=x.prototype,C=c(l(b))==v,y=function(t){var e,a,o,r,s,n,i,c,u=f(t,!1);if("string"==typeof u&&u.length>2)if(u=m(u),e=u.charCodeAt(0),43===e||45===e){if(a=u.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+u}for(s=u.slice(2),n=s.length,i=0;i<n;i++)if(c=s.charCodeAt(i),c<48||c>r)return NaN;return parseInt(s,o)}return+u};if(s(v,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var S,_=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof _&&(C?d((function(){b.valueOf.call(a)})):c(a)!=v)?u(new x(y(e)),a,_):y(e)},w=o?p(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),I=0;w.length>I;I++)i(x,S=w[I])&&!i(_,S)&&h(_,S,g(x,S));_.prototype=b,b.constructor=_,n(r,v,_)}},c975:function(t,e,a){"use strict";var o=a("23e7"),r=a("4d64").indexOf,s=a("a640"),n=a("ae40"),i=[].indexOf,c=!!i&&1/[1].indexOf(1,-0)<0,u=s("indexOf"),f=n("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:c||!u||!f},{indexOf:function(t){return c?i.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},d81d:function(t,e,a){"use strict";var o=a("23e7"),r=a("b727").map,s=a("1dde"),n=a("ae40"),i=s("map"),c=n("map");o({target:"Array",proto:!0,forced:!i||!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},e2cb:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container newsfeed-wrapper"},[a("div",{staticClass:"row justify-content-center"},t._l(t.posts,(function(e,o){return a("div",{key:o,staticClass:"col-md-6 col-sm-12"},[a("Post-Card",{attrs:{post:e,user:t.user,index:o}})],1)})),0)])])},r=[],s=a("5530"),n=a("4360"),i=(a("025e"),a("2f62")),c=a("323e"),u=a.n(c),f=a("314b"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header text-start",staticStyle:{"font-family":"'Andika New Basic'"}},[t._m(0),a("span",{staticStyle:{"margin-bottom":"0","font-size":"1.6rem"}},[t._v(" "+t._s(t.usernameFull)+" ")]),a("p",{staticClass:"text-muted",staticStyle:{"margin-left":"47px","font-size":"95%","margin-top":"-2px"}},[t._v(" "+t._s(t.postCreationTimeAgo)+" ")])]),a("div",{staticClass:"card-body text-start"},[a("h5",{staticClass:"card-title"}),a("p",{staticClass:"card-text",staticStyle:{"font-family":"'Kite one'"}},[t._v(" "+t._s(t.post.caption)+" ")]),a("img",{staticClass:"img-thumbnail",staticStyle:{width:"100%"},attrs:{src:t.post.image,alt:t.post.author.username,srcset:""}})]),a("div",{staticClass:"card-footer text-start text-muted"},[a("div",{staticClass:"float-start"},[a("span",{staticClass:"post-react",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.reactToPost()}}},[t.isUserReactToPost?t._e():a("i",{staticClass:"far fa-heart fa-fw fa-2x"}),t.isUserReactToPost?a("i",{staticClass:"fas fa-heart fa-fw fa-2x",staticStyle:{color:"#c30a0a"}}):t._e()]),t._m(1)]),a("div",{staticClass:"float-end",staticStyle:{"font-family":"'Langar'"}},[t._v(" "+t._s(t.post.reacts.length)+" react . "+t._s(t.post.comments.length)+" comment ")])])])])},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticStyle:{"padding-top":"8px"}},[a("i",{staticClass:"fas fa-user-circle fa-fw fa-2x"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"post-comment",staticStyle:{"margin-left":"10px",cursor:"pointer"}},[a("i",{staticClass:"far fa-comment fa-fw fa-2x"})])}],p=(a("4de4"),a("c975"),a("a15b"),a("d81d"),a("fb6a"),a("a9e3"),a("ac1f"),a("1276"),a("96cf"),a("1da1")),g={name:"Post-Card",props:{post:Object,user:Object,index:Number},data:function(){return{isLoggedIn:!1,isReactTrigger:!1}},methods:{reactToPost:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.a.start(),e.next=3,t.checkLoginStatus();case 3:t.isLoggedIn?t.isUserReactToPost?f["a"].deleteReact(t.post._id,t.post.reacts[t.reactIndex]._id).then((function(e){"success"===e.data[1].catagory.toLowerCase()?(u.a.done(),t.isReactTrigger=!1,t.$store.dispatch("postStore/deletePostsReact",{postIndex:t.index,reactIndex:t.reactIndex})):(u.a.done(),t.$store.dispatch("notificationStore/showNotification",e.data[1]))})).catch((function(e){t.$store.dispatch("notificationStore/showNotification",{catagory:"error",title:"Connection Problem",message:e}),u.a.done()})):f["a"].createReact(t.post._id,{reaction:!0}).then((function(e){"success"===e.data[1].catagory.toLowerCase()?(u.a.done(),t.isReactTrigger=!0,t.$store.dispatch("postStore/updatePosts",{post:e.data[0],index:t.index})):(u.a.done(),t.$store.dispatch("notificationStore/showNotification",e.data[1]))})).catch((function(e){t.$store.dispatch("notificationStore/showNotification",{catagory:"error",title:"Check this error",message:e.message}),u.a.done()})):t.$store.dispatch("notificationStore/showNotification",{catagory:"error",title:"Log in required",message:"To react this post you need to be logged in"});case 4:case"end":return e.stop()}}),e)})))()},checkLoginStatus:function(){var t=this;return u.a.start(),f["a"].isLoggedIn().then((function(e){u.a.done(),t.isLoggedIn=e.data[1],t.$store.dispatch("postStore/saveUser",e.data[0])})).catch((function(e){t.$store.dispatch("notificationStore/showNotification",{catagory:"error",title:"Connection Problem",message:"You are offline."}),u.a.done()}))}},computed:{usernameFull:function(){var t=this.post.author.username;return t.split(" ").map((function(t){return t.slice(0,1).toUpperCase()+t.slice(1).toLowerCase()})).join(" ")},isUserReactToPost:function(){var t=this;return!!this.user&&(this.isReactTrigger?this.isReactTrigger:this.post.reacts.filter((function(e){return e.author===t.user._id})).length)},reactIndex:function(){var t=this;if(this.user){var e=this.post.reacts.map((function(e){return e.author===t.user._id}));return e.indexOf(!0)}},postCreationTimeAgo:function(){var t=new Date,e=new Date(this.post.date);return t.getFullYear()>e.getFullYear()?"".concat(t.getFullYear()-e.getFullYear()," year ago"):t.getMonth()>e.getMonth()?"".concat(t.getMonth()-e.getMonth()," month ago"):t.getDate()>e.getDate()?"".concat(t.getDate()-e.getDate()," day ago"):t.getHours()>e.getHours()?"".concat(t.getHours()-e.getHours()," hour ago"):"".concat(t.getMinutes()-e.getMinutes()," minutes ago")}},components:{}},h=g,m=(a("3af5"),a("2877")),v=Object(m["a"])(h,d,l,!1,null,"29dea920",null),x=v.exports,b={name:"NewsFeed",props:{},data:function(){return{}},methods:{},mounted:function(){},computed:Object(s["a"])(Object(s["a"])({},Object(i["b"])("postStore",["posts"])),Object(i["b"])("postStore",["user"])),beforeRouteEnter:function(t,e,a){u.a.start(),n["a"].dispatch("postStore/getAllPosts").then((function(){u.a.done(),a()}))},beforeRouteUpdate:function(t,e,a){u.a.start(),n["a"].dispatch("postStore/getAllPosts").then((function(){u.a.done(),a()}))},components:{PostCard:x}},C=b,y=(a("945f"),Object(m["a"])(C,o,r,!1,null,"6fe35ffc",null));e["default"]=y.exports}}]);
//# sourceMappingURL=chunk-9fa5f6b4.154b4374.js.map